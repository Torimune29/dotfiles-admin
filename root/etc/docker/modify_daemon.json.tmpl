#!/bin/bash

set -euo pipefail

{{ if and .requestDocker (eq .daemonManager "" | not) }}
cat <<EOF
{
  "containerd": "/run/containerd/containerd.sock",
  "debug": true,
  "default-runtime": "runc",
  "dns": ["{{ .publicDnsPrimary }}", "{{ .publicDnsSecondary }}"],
  "features": {"buildkit": true},
  "hosts": ["fd://", "unix:///var/run/docker.sock", "tcp://0.0.0.0:2375"]
}
EOF
{{ end }}


